[% DEFAULT
   title="Padre Plugin Cookbook Recipe 01"
   description=""
%]
[% WRAPPER lib/xhtml_doc

%]

[% WRAPPER chrome/styled_panel %]

<ul>
  <li>This page complements {{{Padre::Plugin::Cookbook Recipe-01}}}, it is not meant to be installable, just an aid, with a suggested layout, enjoy. More detail will follow in subsequent Cookbooks.</li>
  <li>You can either svn Padre::Plugin::Cookbook or build your own with Cookbook01.zip in Attachments.</li>
  <li>Updated to Padre plug-in API 2.2</li>
</ul>

<h2>Step 1 - Create Skeleton</h2>

Padre can do this for you see [wiki:Features/ProjectSkeletonGeneration Project Skeleton Generation]

<ul>
  <li>Assumption you are building in your copy of Padre trunk.
     <ul>
       <li>for me this is, /src/Padre/Padre == {{{http://svn.perlide.org/padre/trunk/Padre}}}</li>
       <li>thus for me, Cookbook01 is located in  /src/Padre/Padre-Plugin-Cookbook01, checkout some other Plugins to see for your self.</li>
     </ul>
  </li>
  <li>FBP/fbp directories, follow current Padre trunk Naming convention</li>
</ul>

<pre>
Padre-Plugin-Cookbook01/
├── fbp
│   └── MainFB.fbp
├── lib
│   └── Padre
│       └── Plugin
│           ├── Cookbook01
│           │   ├── FBP
│           │   │   └── MainFB.pm
│           │   └── Main.pm
│           └── Cookbook01.pm
└── t
</pre>

<h2>Step 2 Create MainFB.fbp (xml)</h2>

<ul>
  <li>Use wxFormBuilder, v3.1.70</li>
  <li>Create in following order of table below.</li>
  <li>save to plug-in root /fbp/MainFB.fbp as above.</li>
</ul>

<table>
<tr><th colspan="2">wxWidget</th><th colspan="4">Properties</th><th colspan="2">Events</th></tr>
<tr><th>Icon</th><th>Type</th><td>name</td><td>label/title</td><td>public</td><td>other</td><td>type</td><td>value</td></tr>
<tr><td style="background: #ffd"><img src="http://padre.perlide.org/trac/raw-attachment/wiki/PadrePluginCookbook01/wxproject.png"></td>
    <td>Project</td><td>Cookbook01</td><td>n/a</td><td>n/a</td><td>n/a</td><td>n/a</td><td>n/a</td></tr>
</table>
|----------------------------------
{{{#!td style="background: #ffd"
[[Image(wxdialog.png)]]
}}}
{{{#!td 
Dialog
}}}
{{{#!td 
Padre::Plugin::Cookbook01::FBP::MainFB
}}}
{{{#!td
Main
}}}
{{{#!td 
n/a
}}}
{{{#!td 
wxRESIZE_BORDER
}}}
{{{#!td
n/a
}}}
{{{#!td
n/a
}}}
|----------------------------------
{{{#!td style="background: #ffd"
[[Image(wxbsizer.png)]]
}}}
{{{#!td 
wxBoxSizer
}}}
{{{#!td 
bSizer1
}}}
{{{#!td
n/a
}}}
{{{#!td 
n/a
}}}
{{{#!td 
n/a
}}}
{{{#!td
n/a
}}}
{{{#!td
n/a
}}}
|----------------------------------
{{{#!td
[[Image(wxstatic_text.png)]]
}}}
{{{#!td 
wxStaticText
}}}
{{{#!td 
m_staticText1
}}}
{{{#!td
Hello World
}}}
{{{#!td 
n/a
}}}
{{{#!td 
wxALIGN_CENTER
}}}
{{{#!td
n/a
}}}
{{{#!td
n/a
}}}

<ul>
  <li>Dialog must start with <b>Padre::Plugin</b> for Step 3 to work.</li>
  <li>A Sizer is compulsory to hold our text.</li>
  <li>wxRESIZE_BORDER lets you grab lower left hand corner.</li>
  <li>wxALIGN_CENTER centers text</li>
</ul>

<h2>Step 3 {{{Padre::Plugin::FormBuilder}}}</h2>
<ul>
  <li>Use generator to create MainFB.pm from MainFB.fbp</li>
  <li>Tip have {{{Padre::Plugin::Cookbook01.pm}}} Open before running generator.</li>
</ul>

<h2>Step 4 Perl Plug-in Code</h2>

<ul>
  <li>Read POD for {{{Padre::Plugin}}}</li>
  <li>Read POD for Cookbook01.pm and Main.pm.</li>
  <li>Cookbook01 Required methods with minimum requirements</li>
</ul>

<pre>
sub padre_interfaces {
	return (
		# Default, required
		'Padre::Plugin'         => '0.91',
		# used by MainFB by Padre::Plugin::FormBuilder
		'Padre::Wx::Role::Main' => '0.91',
		# used by MainFb by Padre::Plugin::FormBuilder
		'Padre::Wx'             => '0.91',
		);
}
# Called by Padre::Wx::Dialog::PluginManager
# my @needs = $plugin->padre_interfaces;

sub plugin_name {
	return 'Cookbook01';
}
# Called by Padre::Wx::Dialog::PluginManager
# $self->{label}->SetLabel( $plugin->plugin_name );
</pre>

<h2>What is Padre::Wx</h2>

<pre>
XS magic
Wx loads it at runtime
when you use Wx;
and when you use Padre::Wx you get Wx::*
http://perldoc.perl.org/perlxs.html
basically they are loading symbols on the fly when the C library loads
DLL
or shared library (.so)
</pre>

Thanks for that azawawi.

<ul>
  <li>Run Tests, note results, //critiques welcome.</li>  
</ul>

<h2>Step 5 Run</h2>

<ul>
  <li>perl dev -a -die</li>
  <li>You should now have Cookbook01 in your Tools menu, enjoy.</li>
</ul>

<h2>Foot Notes</h2>

<h3>Why Main</h3>

Well I needed a convention that I could expand upon. Which made sense to me, so here goes:

<ul>
  <li>MainFB.fbp is generated by wxFormBuilder,</li>
  <li>MainFB.pm is geneated from previous by {{{Padre::Plugin::FormBuilder}}}.</li>
</ul>

The FB tells me it's nought to do with me. 

<ul>
  <li>Main.pm is the event handler for {{{MainFB.pm}}}.</li>
</ul>

<a href="/plugin-dialog.html">Plugin Dialog</a>


[% END %]
[% END %]


